(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{7225:(e,t,a)=>{Promise.resolve().then(a.bind(a,1137))},1137:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>_});var r=a(5155),s=a(2115),i=a(6046),l=a(399),n=a(7058),o=a(4595),c=a(9904),d=a(3415),u=a(8683),m=a(3312),f=a(3900),p=a(8986),x=a(9749),h=a(3610),g=a(8166),b=a(7357),y=a(7028),v=a(3360),j=a(4256),w=a(1488),N=a(7668),C="Tabs",[O,k]=(0,g.A)(C,[b.RG]),P=(0,b.RG)(),[E,F]=O(C),R=s.forwardRef((e,t)=>{let{__scopeTabs:a,value:s,onValueChange:i,defaultValue:l,orientation:n="horizontal",dir:o,activationMode:c="automatic",...d}=e,u=(0,j.jH)(o),[m,f]=(0,w.i)({prop:s,onChange:i,defaultProp:l});return(0,r.jsx)(E,{scope:a,baseId:(0,N.B)(),value:m,onValueChange:f,orientation:n,dir:u,activationMode:c,children:(0,r.jsx)(v.sG.div,{dir:u,"data-orientation":n,...d,ref:t})})});R.displayName=C;var A="TabsList",G=s.forwardRef((e,t)=>{let{__scopeTabs:a,loop:s=!0,...i}=e,l=F(A,a),n=P(a);return(0,r.jsx)(b.bL,{asChild:!0,...n,orientation:l.orientation,dir:l.dir,loop:s,children:(0,r.jsx)(v.sG.div,{role:"tablist","aria-orientation":l.orientation,...i,ref:t})})});G.displayName=A;var S="TabsTrigger",T=s.forwardRef((e,t)=>{let{__scopeTabs:a,value:s,disabled:i=!1,...l}=e,n=F(S,a),o=P(a),c=B(n.baseId,s),d=$(n.baseId,s),u=s===n.value;return(0,r.jsx)(b.q7,{asChild:!0,...o,focusable:!i,active:u,children:(0,r.jsx)(v.sG.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...l,ref:t,onMouseDown:(0,h.m)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():n.onValueChange(s)}),onKeyDown:(0,h.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&n.onValueChange(s)}),onFocus:(0,h.m)(e.onFocus,()=>{let e="manual"!==n.activationMode;u||i||!e||n.onValueChange(s)})})})});T.displayName=S;var D="TabsContent",L=s.forwardRef((e,t)=>{let{__scopeTabs:a,value:i,forceMount:l,children:n,...o}=e,c=F(D,a),d=B(c.baseId,i),u=$(c.baseId,i),m=i===c.value,f=s.useRef(m);return s.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,r.jsx)(y.C,{present:l||m,children:a=>{let{present:s}=a;return(0,r.jsx)(v.sG.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!s,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:s&&n})}})});function B(e,t){return"".concat(e,"-trigger-").concat(t)}function $(e,t){return"".concat(e,"-content-").concat(t)}L.displayName=D;var H=a(1567);let I=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(G,{ref:t,className:(0,H.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...s})});I.displayName=G.displayName;let z=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(T,{ref:t,className:(0,H.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...s})});z.displayName=T.displayName;let J=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(L,{ref:t,className:(0,H.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});J.displayName=L.displayName;var q=a(9506),M=a(1536);let Z=d.z.object({registerName:d.z.string().min(6,"Name must be at least 6 characters."),registerEmail:d.z.string().email("Invalid email address."),registerPassword:d.z.string().regex(/^(?=.*[A-Za-z])(?=.*\d).{8,}$/,"Password must be at least 8 characters, including at least 1 letter and 1 digit.")});function _(){let e=(0,i.useRouter)(),[t,a]=(0,s.useState)(!1),[h,g]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),[v,j]=(0,s.useState)(""),[w,N]=(0,s.useState)(""),[C,O]=(0,s.useState)(""),[k,P]=(0,s.useState)(""),[E,F]=(0,s.useState)(""),A=async t=>{t.preventDefault(),a(!0),g(null),y(null);try{await (0,l.x9)(o.j,v,w),e.push("/")}catch(e){e instanceof Error?g(e.message||"Failed to log in. Please try again."):g("Failed to log in. Please try again.")}finally{a(!1)}},G=async e=>{e.preventDefault(),a(!0),g(null),y(null);try{Z.parse({registerName:C,registerEmail:k,registerPassword:E});let e=(await (0,l.eJ)(o.j,k,E)).user;await (0,l.r7)(e,{displayName:C}),await (0,n.BN)((0,n.H9)(o.db,"users",e.uid),{email:k,displayName:C,avatarUrl:"https://via.placeholder.com/128?text=No+Avatar",jobOccupation:"",isAdmin:!1,isBanned:!1,createdAt:(0,n.O5)()}),await (0,l.gA)(e),y("Registration successful! A verification link has been sent to your email.")}catch(e){e instanceof d.G?g(e.issues[0].message):e instanceof c.g&&"auth/email-already-in-use"===e.code?g("This email is already registered. If you forgot your password, please click the 'Forgot your password?' link below."):e instanceof Error?g(e.message||"Failed to create an account. Please try again."):g("Failed to create an account. Please try again.")}finally{a(!1)}},S=async()=>{a(!0),g(null),y(null);try{if(!k)throw Error("Please enter your email in the registration form before requesting a password reset.");await (0,l.J1)(o.j,k),y("A password reset link has been sent to the registration email.")}catch(e){e instanceof Error?g(e.message||"Failed to send password reset. Please try again."):g("Failed to send password reset. Please try again.")}finally{a(!1)}},T=async t=>{let r;switch(a(!0),g(null),y(null),t){case"Google":r=new l.HF;break;case"GitHub":r=new l.Dt;break;case"Twitter":r=new l.ny;break;case"Apple":r=new l.LD("apple.com");break;default:return}try{let t=(await (0,l.df)(o.j,r)).user,a=(0,n.H9)(o.db,"users",t.uid);(await (0,n.x7)(a)).exists()?await (0,n.BN)(a,{email:t.email,displayName:t.displayName||"No Name",avatarUrl:t.photoURL||"https://via.placeholder.com/128?text=No+Avatar",updatedAt:(0,n.O5)()},{merge:!0}):await (0,n.BN)(a,{email:t.email,displayName:t.displayName||"No Name",avatarUrl:t.photoURL||"https://via.placeholder.com/128?text=No+Avatar",jobOccupation:"",isAdmin:!1,isBanned:!1,createdAt:(0,n.O5)()}),e.push("/")}catch(e){e instanceof Error?g(e.message||"Failed to log in with ".concat(t,".")):g("Failed to log in with ".concat(t,"."))}finally{a(!1)}},D=async()=>{a(!0),g(null),y(null);try{if(!v)throw Error("Please enter your email in the Email field first.");await (0,l.J1)(o.j,v),y("A password reset link has been sent to your email.")}catch(e){e instanceof Error?g(e.message||"Failed to send password reset. Please try again."):g("Failed to send password reset. Please try again.")}finally{a(!1)}};return(0,r.jsxs)("div",{className:"relative w-full h-screen flex flex-col",children:[(0,r.jsx)(u.default,{}),(0,r.jsx)("div",{className:"flex-grow flex items-center justify-center bg-gray-100",children:(0,r.jsxs)(x.Zp,{className:"w-[350px]",children:[(0,r.jsxs)(x.aR,{children:[(0,r.jsx)(x.ZB,{children:"Welcome"}),(0,r.jsx)(x.BT,{children:"Login or create an account to get started."})]}),(0,r.jsxs)(x.Wu,{children:[h&&(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("p",{className:"text-red-600 text-sm",children:h})}),b&&(0,r.jsx)("p",{className:"text-green-600 text-sm mb-4",children:b}),(0,r.jsxs)(R,{defaultValue:"login",className:"w-full",children:[(0,r.jsxs)(I,{className:"grid w-full grid-cols-2",children:[(0,r.jsx)(z,{value:"login",children:"Login"}),(0,r.jsx)(z,{value:"register",children:"Register"})]}),(0,r.jsx)(J,{value:"login",children:(0,r.jsxs)("form",{onSubmit:A,children:[(0,r.jsxs)("div",{className:"grid w-full items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,r.jsx)(p.J,{htmlFor:"login-email",children:"Email"}),(0,r.jsx)(f.p,{id:"login-email",placeholder:"Enter your email",type:"email",required:!0,value:v,onChange:e=>j(e.target.value)})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,r.jsx)(p.J,{htmlFor:"login-password",children:"Password"}),(0,r.jsx)(f.p,{id:"login-password",placeholder:"Enter your password",type:"password",required:!0,value:w,onChange:e=>N(e.target.value)})]})]}),(0,r.jsx)(m.$,{className:"w-full mt-6",type:"submit",disabled:t,children:t?"Logging in...":"Login"}),(0,r.jsx)("div",{className:"text-center mt-2",children:(0,r.jsx)("button",{type:"button",onClick:D,disabled:t,className:"text-sm text-blue-600 underline",children:"Forgot your password?"})}),(0,r.jsxs)("div",{className:"relative my-4",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("span",{className:"w-full border-t"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,r.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsxs)(m.$,{variant:"outline",type:"button",disabled:t,onClick:()=>T("Google"),children:[(0,r.jsx)(q.F4b,{className:"mr-2 h-4 w-4"}),"Google"]}),(0,r.jsxs)(m.$,{variant:"outline",type:"button",disabled:t,onClick:()=>T("GitHub"),children:[(0,r.jsx)(M.hL4,{className:"mr-2 h-4 w-4"}),"GitHub"]}),(0,r.jsxs)(m.$,{variant:"outline",type:"button",disabled:t,onClick:()=>T("Twitter"),children:[(0,r.jsx)(M.feZ,{className:"mr-2 h-4 w-4"}),"Twitter"]}),(0,r.jsxs)(m.$,{variant:"outline",type:"button",disabled:t,onClick:()=>T("Apple"),children:[(0,r.jsx)(M.eMv,{className:"mr-2 h-4 w-4"}),"Apple"]})]})]})}),(0,r.jsx)(J,{value:"register",children:(0,r.jsxs)("form",{onSubmit:G,children:[(0,r.jsxs)("div",{className:"grid w-full items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,r.jsx)(p.J,{htmlFor:"register-name",children:"Name"}),(0,r.jsx)(f.p,{id:"register-name",placeholder:"Minimum 6 characters",required:!0,value:C,onChange:e=>O(e.target.value)})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,r.jsx)(p.J,{htmlFor:"register-email",children:"Email"}),(0,r.jsx)(f.p,{id:"register-email",placeholder:"Enter your email",type:"email",required:!0,value:k,onChange:e=>P(e.target.value)})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,r.jsx)(p.J,{htmlFor:"register-password",children:"Password"}),(0,r.jsx)(f.p,{id:"register-password",placeholder:"Min 8 chars; at least 1 letter & 1 digit",type:"password",required:!0,value:E,onChange:e=>F(e.target.value)})]})]}),(0,r.jsx)(m.$,{className:"w-full mt-6",type:"submit",disabled:t,children:t?"Creating account...":"Create account"}),(0,r.jsx)("div",{className:"text-center mt-2",children:(0,r.jsx)("button",{type:"button",onClick:S,disabled:t,className:"text-sm text-blue-600 underline",children:"Forgot your password?"})}),(0,r.jsxs)("div",{className:"relative my-4",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("span",{className:"w-full border-t"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,r.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsxs)(m.$,{variant:"outline",type:"button",disabled:t,onClick:()=>T("Google"),children:[(0,r.jsx)(q.F4b,{className:"mr-2 h-4 w-4"}),"Google"]}),(0,r.jsxs)(m.$,{variant:"outline",type:"button",disabled:t,onClick:()=>T("GitHub"),children:[(0,r.jsx)(M.hL4,{className:"mr-2 h-4 w-4"}),"GitHub"]}),(0,r.jsxs)(m.$,{variant:"outline",type:"button",disabled:t,onClick:()=>T("Twitter"),children:[(0,r.jsx)(M.feZ,{className:"mr-2 h-4 w-4"}),"Twitter"]}),(0,r.jsxs)(m.$,{variant:"outline",type:"button",disabled:t,onClick:()=>T("Apple"),children:[(0,r.jsx)(M.eMv,{className:"mr-2 h-4 w-4"}),"Apple"]})]})]})})]})]}),(0,r.jsx)(x.wL,{className:"flex justify-center",children:(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"By continuing, you agree to our Terms of Service and Privacy Policy."})})]})})]})}},9749:(e,t,a)=>{"use strict";a.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>l,aR:()=>n,wL:()=>u});var r=a(5155),s=a(2115),i=a(1567);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...s})});l.displayName="Card";let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...s})});n.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},3900:(e,t,a)=>{"use strict";a.d(t,{p:()=>l});var r=a(5155),s=a(2115),i=a(1567);let l=s.forwardRef((e,t)=>{let{className:a,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});l.displayName="Input"},8986:(e,t,a)=>{"use strict";a.d(t,{J:()=>c});var r=a(5155),s=a(2115),i=a(6195),l=a(1027),n=a(1567);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.b,{ref:t,className:(0,n.cn)(o(),a),...s})});c.displayName=i.b.displayName},3435:(e,t,a)=>{"use strict";a.d(t,{k5:()=>d});var r=a(2115),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},i=r.createContext&&r.createContext(s),l=["attr","size","title"];function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach(function(t){var r,s;r=t,s=a[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function d(e){return t=>r.createElement(u,n({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,a)=>r.createElement(t.tag,c({key:a},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var a,{attr:s,size:i,title:o}=e,d=function(e,t){if(null==e)return{};var a,r,s=function(e,t){if(null==e)return{};var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}(e,l),u=i||t.size||"1em";return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),r.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,d,{className:a,style:c(c({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&r.createElement("title",null,o),e.children)};return void 0!==i?r.createElement(i.Consumer,null,e=>t(e)):t(s)}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,523,753,711,353,198,405,683,441,517,358],()=>t(7225)),_N_E=e.O()}]);