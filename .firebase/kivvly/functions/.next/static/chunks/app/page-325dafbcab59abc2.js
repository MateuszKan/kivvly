(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6845:(e,t,s)=>{Promise.resolve().then(s.bind(s,1284))},1284:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>P});var a=s(5155),i=s(2115),r=s(9047),o=s(3312),n=s(3900),l=s(7223),c=s(853),d=s(2291),u=s(5565),m=s(7364),p=s(9053),f=s(9532);let h={toilets:(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDEBD"}),wifi:(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDCF6"}),quietEnvironment:(0,a.jsx)("span",{className:"text-lg",children:"\uD83E\uDD2B"}),powerSocket:(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDD0C"})};function g(e){let{name:t,photos:s,amenities:r,onDirectionAction:n}=e,[l,c]=(0,i.useState)(0),d=s&&s.length>0,g=d?s[l]:"/placeholder.svg";return(0,a.jsxs)("div",{className:" max-w-80 bg-white shadow-lg rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative w-full h-40",children:[(0,a.jsx)("div",{className:"relative w-full h-full",children:(0,a.jsx)(u.default,{src:g,alt:"".concat(t," photo"),fill:!0,className:"object-cover"})}),d&&s.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{s&&0!==s.length&&c(e=>(e-1+s.length)%s.length)},className:"absolute left-2 top-1/2 -translate-y-1/2 p-1 rounded-full bg-gray-800 bg-opacity-60 text-white hover:bg-opacity-80",children:(0,a.jsx)(m.A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>{s&&0!==s.length&&c(e=>(e+1)%s.length)},className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded-full bg-gray-800 bg-opacity-60 text-white hover:bg-opacity-80",children:(0,a.jsx)(p.A,{className:"w-5 h-5"})})]})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h2",{className:"text-xl mb-2 font-semibold",children:t}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:r.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-full px-3 py-1 text-sm",children:[null!==(s=h[e.id])&&void 0!==s?s:(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{className:"ml-1",children:e.label})]},t)})}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsxs)(o.$,{className:"w-full",onClick:n,children:[(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Get Directions"]})})]})]})}var x=s(4595),v=s(7058),b=s(1651);let w={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"},y=0,j=new Map,S=e=>{if(j.has(e))return;let t=setTimeout(()=>{j.delete(e),A({type:w.REMOVE_TOAST,toastId:e})},1e6);j.set(e,t)},N=(e,t)=>{switch(t.type){case w.ADD_TOAST:return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case w.UPDATE_TOAST:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case w.DISMISS_TOAST:{let{toastId:s}=t;return s?S(s):e.toasts.forEach(e=>{S(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case w.REMOVE_TOAST:if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},k=[],T={toasts:[]};function A(e){T=N(T,e),k.forEach(e=>{e(T)})}function E(e){let{...t}=e,s=(y=(y+1)%Number.MAX_VALUE).toString(),a=()=>A({type:w.DISMISS_TOAST,toastId:s});return A({type:w.ADD_TOAST,toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>A({type:w.UPDATE_TOAST,toast:{...e,id:s}})}}function D(e){let{onLocateAction:t}=e,[s,r]=(0,i.useState)(!1),{toast:n}=function(){let[e,t]=i.useState(T);return i.useEffect(()=>(k.push(t),()=>{let e=k.indexOf(t);e>-1&&k.splice(e,1)}),[]),{...e,toast:E,dismiss:e=>A({type:w.DISMISS_TOAST,toastId:e})}}();return(0,a.jsxs)(o.$,{onClick:()=>{if(!("geolocation"in navigator)){n({title:"Geolocation not supported",description:"Your browser doesn't support geolocation.",variant:"destructive"});return}r(!0),navigator.geolocation.getCurrentPosition(e=>{r(!1),t(e.coords.latitude,e.coords.longitude),n({title:"Target Acquired",description:"Latitude: ".concat(e.coords.latitude,", Longitude: ").concat(e.coords.longitude)})},e=>{r(!1),n({title:"Unable to retrieve your location",description:e.message,variant:"destructive"})})},disabled:s,className:"\n        group relative overflow-hidden bg-gradient-to-r from-indigo-500 to-purple-600\n        text-white hover:from-indigo-600 hover:to-purple-700 transition-all duration-300\n        p-3 rounded-full shadow-lg\n        ".concat(s?"animate-pulse":"","\n      "),children:[(0,a.jsx)("span",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-20 transform rotate-45 translate-x-[-50%] group-hover:translate-x-[100%] transition-transform duration-700 "}),(0,a.jsx)("span",{className:"relative flex items-center justify-center",children:(0,a.jsx)(b.A,{className:"w-6 h-6"})})]})}let C=[],O={lat:40.7128,lng:-74.006},_={"Power Outlets":"powerSocket","Quiet Environment":"quietEnvironment","Wi-Fi":"wifi",Toilets:"toilets"},I=[{key:"toilets",icon:"\uD83D\uDEBD"},{key:"wifi",icon:"\uD83D\uDCF6"},{key:"quietEnvironment",icon:"\uD83E\uDD2B"},{key:"powerSocket",icon:"\uD83D\uDD0C"}];function z(){let[e,t]=(0,i.useState)(null),[s,u]=(0,i.useState)(null),[m,p]=(0,i.useState)(null),[f,h]=(0,i.useState)(null),[b,w]=(0,i.useState)(null),y=(0,i.useRef)(null),[j,S]=(0,i.useState)([]),[N,k]=(0,i.useState)([]),[T,A]=(0,i.useState)({toilets:!1,wifi:!1,quietEnvironment:!1,powerSocket:!1}),[E,z]=(0,i.useState)(null),[P,L]=(0,i.useState)(!1),[M,R]=(0,i.useState)(!1),[U,q]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=()=>{L(window.innerWidth<900)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("https://ipapi.co/json/");if(!e.ok)throw Error("Failed to fetch IP-based location");let t=await e.json();h({lat:t.latitude,lng:t.longitude})}catch(e){console.warn("IP-based geolocation failed; using default center.",e),h(O)}})()},[]),(0,i.useEffect)(()=>{(async()=>{let e=await (0,v.GG)((0,v.rJ)(x.db,"remoteWorkLocations")),t=[];e.forEach(e=>{let s=e.data();"approved"===s.status&&t.push({id:e.id,...s})}),S(t),k(t)})()},[]),(0,i.useEffect)(()=>{k(j.filter(e=>{let t=Array.isArray(e.amenities)?e.amenities:[];return(!T.toilets||!!t.includes("toilets"))&&(!T.wifi||!!t.includes("wifi"))&&(!T.quietEnvironment||!!t.includes("quietEnvironment"))&&(!T.powerSocket||!!t.includes("powerSocket"))}))},[T,j]);let F=e=>{A(t=>({...t,[e]:!t[e]}))},W=(e,t)=>{let s=_[e];A(e=>({...e,[s]:t}))},Z=(0,i.useCallback)(e=>{t(e),"undefined"!=typeof google&&(u({url:"/marker.svg",scaledSize:new google.maps.Size(40,40),anchor:new google.maps.Point(20,40)}),p({url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('\n            <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60">\n              <circle cx="30" cy="30" r="10" fill="blue" opacity="1"/>\n              <circle cx="30" cy="30" r="20" fill="blue" opacity="0.5">\n                <animate attributeName="r" from="20" to="30" dur="1.5s" repeatCount="indefinite"/>\n                <animate attributeName="opacity" from="0.5" to="0" dur="1.5s" repeatCount="indefinite"/>\n              </circle>\n            </svg>\n          '),scaledSize:new google.maps.Size(60,60),anchor:new google.maps.Point(15,15)}))},[]);return f?(0,a.jsx)("div",{className:"relative w-full h-[100dvh] flex flex-col overflow-hidden",children:(0,a.jsxs)("div",{className:"flex-grow relative overflow-hidden",children:[(0,a.jsxs)(r.u6,{mapContainerClassName:"absolute inset-0 w-full h-full",center:f,zoom:12,onLoad:Z,options:{styles:C,clickableIcons:!1,disableDefaultUI:!0},children:[N.map(e=>(0,a.jsx)(r.pH,{position:{lat:e.lat,lng:e.lng},onClick:()=>q(e),title:e.name||"Remote Work Location",icon:s||void 0},e.id)),U&&(0,a.jsx)(r.Fu,{position:{lat:U.lat,lng:U.lng},onCloseClick:()=>q(null),options:{disableAutoPan:!1,pixelOffset:new google.maps.Size(0,-20)},children:(0,a.jsx)("div",{style:{margin:0,padding:0},children:(0,a.jsx)(g,{name:U.name||"No Name",photos:U.images||[],amenities:function(e){if(!Array.isArray(e))return[];let t=[];return e.includes("toilets")&&t.push({id:"toilets",label:"Toilets"}),e.includes("wifi")&&t.push({id:"wifi",label:"Wi-Fi"}),e.includes("quietEnvironment")&&t.push({id:"quietEnvironment",label:"Quiet Environment"}),e.includes("powerSocket")&&t.push({id:"powerSocket",label:"Power Socket"}),t}(U.amenities),onDirectionAction:()=>{let{lat:e,lng:t}=U;window.open("https://www.google.com/maps/dir/?api=1&destination=".concat(e,",").concat(t),"_blank")}})})}),E&&(0,a.jsx)(r.pH,{position:E,icon:m||void 0,title:"Your current location"})]}),(0,a.jsx)("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 z-10 w-full max-w-3xl px-4",children:(0,a.jsxs)("div",{className:"relative bg-white/30 dark:bg-gray-800/30 backdrop-blur-xl border border-white/30 dark:border-gray-700/30 rounded-xl shadow-xl p-4",children:[(0,a.jsxs)("div",{className:"relative mb-4",children:[(0,a.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2",children:(0,a.jsx)(l.A,{className:"h-5 w-5 text-gray-500"})}),(0,a.jsx)(r.jT,{onLoad:e=>{w(e)},onPlaceChanged:()=>{var e;if(!b)return;let t=b.getPlace();(null==t?void 0:null===(e=t.geometry)||void 0===e?void 0:e.location)&&h({lat:t.geometry.location.lat(),lng:t.geometry.location.lng()})},children:(0,a.jsx)(n.p,{ref:y,type:"text",placeholder:"Search for a location",className:"w-full pl-12 pr-24 h-14 text-lg rounded-lg border-0 shadow-lg"})}),(0,a.jsx)(o.$,{className:"absolute right-2 top-1/2 -translate-y-1/2 bg-gray-800 hover:bg-gray-700 text-white",onClick:()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.focus()},children:(0,a.jsx)(c.A,{className:"h-5 w-5"})})]}),P?(0,a.jsx)("div",{className:"flex flex-wrap gap-4 justify-center p-2 rounded-lg",children:I.map(e=>{let{key:t,icon:s}=e;return(0,a.jsx)("button",{onClick:()=>F(t),className:"text-2xl px-3 py-2 rounded-full ".concat(T[t]?"bg-blue-600 text-white":"text-gray-700"),title:t,children:s},t)})}):(0,a.jsx)("div",{className:"flex flex-wrap gap-6 justify-center p-4 rounded-lg",children:Object.keys(_).map(e=>{let t=_[e];return(0,a.jsxs)("div",{className:"flex bg-transparent items-center space-x-2",children:[(0,a.jsx)(d.S,{id:e.toLowerCase().replace(" ","-"),checked:T[t],onCheckedChange:t=>W(e,!!t)}),(0,a.jsx)("label",{htmlFor:e.toLowerCase().replace(" ","-"),className:"text-sm font-medium leading-none",children:e})]},e)})})]})}),(0,a.jsxs)("div",{className:P?"absolute right-4 top-[80px] z-[9999] flex flex-col items-center":"absolute bottom-8 right-4 z-[9999] flex flex-col items-center",children:[(0,a.jsx)("div",{className:"mb-[40px]",children:(0,a.jsx)(D,{onLocateAction:(t,s)=>{if(e&&(e.setCenter({lat:t,lng:s}),z({lat:t,lng:s}),!M)){let t=e.getZoom()||12;e.setZoom(t+3),R(!0)}}})}),!P&&(0,a.jsxs)("div",{className:"flex flex-col items-center bg-white shadow-md rounded-md overflow-hidden",children:[(0,a.jsx)("button",{className:"px-3 py-2 text-xl font-bold border-b border-gray-200 hover:bg-gray-100",onClick:()=>{if(e){let t=e.getZoom()||12;e.setZoom(t+1)}},children:"+"}),(0,a.jsx)("button",{className:"px-3 py-2 text-xl font-bold hover:bg-gray-100",onClick:()=>{if(e){let t=e.getZoom()||12;e.setZoom(t-1)}},children:"–"})]})]})]})}):(0,a.jsx)("div",{className:"w-full flex items-center justify-center h-[100dvh]",children:(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent border-solid rounded-full animate-spin"})})}function P(){return(0,a.jsx)("main",{className:"full-height",children:(0,a.jsx)(z,{})})}},3312:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var a=s(5155),i=s(2115),r=s(2317),o=s(1027),n=s(1567);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:s,variant:i,size:o,asChild:c=!1,...d}=e,u=c?r.DX:"button";return(0,a.jsx)(u,{className:(0,n.cn)(l({variant:i,size:o,className:s})),ref:t,...d})});c.displayName="Button"},2291:(e,t,s)=>{"use strict";s.d(t,{S:()=>l});var a=s(5155),i=s(2115),r=s(6352),o=s(8867),n=s(1567);let l=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(r.bL,{ref:t,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...i,children:(0,a.jsx)(r.C1,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})})});l.displayName=r.bL.displayName},3900:(e,t,s)=>{"use strict";s.d(t,{p:()=>o});var a=s(5155),i=s(2115),r=s(1567);let o=i.forwardRef((e,t)=>{let{className:s,type:i,...o}=e;return(0,a.jsx)("input",{type:i,className:(0,r.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...o})});o.displayName="Input"},4595:(e,t,s)=>{"use strict";s.d(t,{db:()=>n,j:()=>l});var a=s(9904),i=s(7058),r=s(399);let o=(0,a.Wp)({apiKey:"AIzaSyCzuXne1Zr8WXpmOkuu8cTaY4xMv53mQeQ",authDomain:"kivvly.firebaseapp.com",projectId:"kivvly",storageBucket:"kivvly.firebasestorage.app",messagingSenderId:"413464866352",appId:"1:413464866352:web:61294a4121d0b0b28887f5"}),n=(0,i.aU)(o),l=(0,r.xI)(o)},1567:(e,t,s)=>{"use strict";s.d(t,{cn:()=>r});var a=s(3463),i=s(9795);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,i.QP)((0,a.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,523,84,31,749,402,441,517,358],()=>t(6845)),_N_E=e.O()}]);