(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{6511:(e,r,a)=>{Promise.resolve().then(a.bind(a,5396))},5396:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>A});var s=a(5155),t=a(2115),n=a(6046),l=a(9730),i=a(7058),c=a(4595),d=a(1567);let o=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:"w-full overflow-auto",children:(0,s.jsx)("table",{ref:r,className:(0,d.cn)("w-full caption-bottom text-sm",a),...t})})});o.displayName="Table";let m=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("thead",{ref:r,className:(0,d.cn)("[&_tr]:border-b",a),...t})});m.displayName="TableHeader";let u=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("tbody",{ref:r,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...t})});u.displayName="TableBody",t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("tfoot",{ref:r,className:(0,d.cn)("bg-primary font-medium text-primary-foreground",a),...t})}).displayName="TableFooter";let x=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("tr",{ref:r,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...t})});x.displayName="TableRow";let h=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("th",{ref:r,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...t})});h.displayName="TableHead";let p=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("td",{ref:r,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...t})});p.displayName="TableCell",t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("caption",{ref:r,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",a),...t})}).displayName="TableCaption";let f=(0,a(1027).F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function j(e){let{className:r,variant:a,...t}=e;return(0,s.jsx)("div",{className:(0,d.cn)(f({variant:a}),r),...t})}var y=a(3312),b=a(7401);let g=(0,b.A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),v=(0,b.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function N(){let[e,r]=(0,t.useState)([]),[a,n]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{try{let e=await (0,i.GG)((0,i.rJ)(c.db,"remoteWorkLocations")),a=[];e.forEach(e=>{a.push({id:e.id,...e.data()})}),r(a)}catch(e){console.error("Error fetching places:",e),n("Unable to fetch places. Check console for details.")}})()},[]);let l=async e=>{try{await (0,i.mZ)((0,i.H9)(c.db,"remoteWorkLocations",e),{status:"approved"}),r(r=>r.map(r=>r.id===e?{...r,status:"approved"}:r)),n("Place approved successfully!")}catch(e){console.error("Error approving place:",e),n("Error approving place. Please try again.")}},d=async e=>{try{await (0,i.mZ)((0,i.H9)(c.db,"remoteWorkLocations",e),{status:"rejected"}),r(r=>r.map(r=>r.id===e?{...r,status:"rejected"}:r)),n("Place rejected successfully!")}catch(e){console.error("Error rejecting place:",e),n("Error rejecting place. Please try again.")}},f=e=>{console.log("Edit place with ID:",e)},b=async e=>{try{await (0,i.kd)((0,i.H9)(c.db,"remoteWorkLocations",e)),r(r=>r.filter(r=>r.id!==e)),n("Place deleted successfully!")}catch(e){console.error("Error deleting place:",e),n("Error deleting place. Please try again.")}};return(0,s.jsxs)("div",{children:[a&&(0,s.jsx)("p",{className:"mb-2 text-sm text-gray-600",children:a}),(0,s.jsxs)(o,{children:[(0,s.jsx)(m,{children:(0,s.jsxs)(x,{children:[(0,s.jsx)(h,{children:"Name"}),(0,s.jsx)(h,{children:"Status"}),(0,s.jsx)(h,{children:"Amenities"}),(0,s.jsx)(h,{children:"Actions"})]})}),(0,s.jsxs)(u,{children:[e.map(e=>(0,s.jsxs)(x,{children:[(0,s.jsx)(p,{children:e.name}),(0,s.jsx)(p,{children:(0,s.jsx)(j,{variant:"approved"===e.status?"default":"pending"===e.status?"secondary":"destructive",children:e.status})}),(0,s.jsx)(p,{children:e.amenities&&e.amenities.length>0?e.amenities.join(", "):"â€”"}),(0,s.jsx)(p,{children:(0,s.jsxs)("div",{className:"flex space-x-2",children:["pending"===e.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.$,{onClick:()=>l(e.id),size:"sm",children:"Approve"}),(0,s.jsx)(y.$,{onClick:()=>d(e.id),variant:"destructive",size:"sm",children:"Reject"})]}),(0,s.jsx)(y.$,{onClick:()=>f(e.id),variant:"outline",size:"icon",children:(0,s.jsx)(g,{className:"h-4 w-4"})}),(0,s.jsx)(y.$,{onClick:()=>b(e.id),variant:"outline",size:"icon",children:(0,s.jsx)(v,{className:"h-4 w-4"})})]})})]},e.id)),0===e.length&&(0,s.jsx)(x,{children:(0,s.jsx)(p,{colSpan:4,children:(0,s.jsx)("p",{className:"text-center text-gray-500",children:"No places found."})})})]})]})]})}var k=a(5565);function w(){let[e,r]=(0,t.useState)([]),[a,n]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{try{let e=await (0,i.GG)((0,i.rJ)(c.db,"users")),a=[];e.forEach(e=>{a.push({id:e.id,...e.data()})}),r(a)}catch(e){console.error("Error fetching users:",e),n("Unable to fetch users. Check console for details.")}})()},[]);let l=async(e,a)=>{try{await (0,i.mZ)((0,i.H9)(c.db,"users",e),{isAdmin:a}),r(r=>r.map(r=>r.id===e?{...r,isAdmin:a}:r)),n("Updated admin role for user: ".concat(e))}catch(e){console.error("Error updating admin role:",e),n("Error updating admin role. Please try again.")}},d=async(e,a)=>{try{await (0,i.mZ)((0,i.H9)(c.db,"users",e),{isBanned:a}),r(r=>r.map(r=>r.id===e?{...r,isBanned:a}:r)),n("User ".concat(e," is now ").concat(a?"banned":"unbanned","."))}catch(e){console.error("Error updating ban status:",e),n("Error updating ban status. Please try again.")}},o=async e=>{try{await (0,i.kd)((0,i.H9)(c.db,"users",e)),r(r=>r.filter(r=>r.id!==e)),n("User ".concat(e," removed from Firestore."))}catch(e){console.error("Error removing user:",e),n("Error removing user. Please try again.")}};return 0===e.length?(0,s.jsxs)("div",{className:"text-center p-8 bg-gray-100 rounded-lg",children:[a&&(0,s.jsx)("p",{className:"mb-4 text-gray-600",children:a}),(0,s.jsx)("p",{className:"text-gray-500",children:"No users found."})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[a&&(0,s.jsx)("p",{className:"text-sm text-gray-600 border p-2 rounded-md",children:a}),e.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-300 rounded-md shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(k.default,{src:e.avatarUrl||"https://via.placeholder.com/64?text=No+Avatar",alt:"".concat(e.displayName||e.email," avatar"),className:"w-12 h-12 rounded-full object-cover"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold",children:e.displayName||e.email||"No display name"}),e.email&&(0,s.jsxs)("p",{className:"text-xs text-gray-600",children:["Email: ",e.email]}),(0,s.jsxs)("p",{className:"text-xs text-gray-600",children:["Occupation: ",e.jobOccupation||"N/A"]}),(0,s.jsxs)("p",{className:"text-xs text-gray-600",children:["Admin: ",e.isAdmin?"Yes":"No"]}),(0,s.jsxs)("p",{className:"text-xs text-gray-600",children:["Banned: ",e.isBanned?"Yes":"No"]})]})]}),(0,s.jsxs)("div",{className:"space-x-2",children:[(0,s.jsx)(y.$,{onClick:()=>l(e.id,!e.isAdmin),variant:"outline",children:e.isAdmin?"Remove Admin":"Make Admin"}),(0,s.jsx)(y.$,{onClick:()=>d(e.id,!e.isBanned),variant:"outline",children:e.isBanned?"Unban":"Ban"}),(0,s.jsx)(y.$,{onClick:()=>o(e.id),variant:"destructive",children:"Remove"})]})]},e.id))]})}var E=a(8683);function A(){let e=(0,n.useRouter)(),{user:r}=(0,l.Q)();return((0,t.useEffect)(()=>{r||e.push("/login?reason=unauthorized")},[r,e]),r)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E.default,{}),(0,s.jsxs)("div",{className:"container mx-auto p-6 space-y-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"All Places"}),(0,s.jsx)(N,{})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"All Users"}),(0,s.jsx)(w,{})]})]})]}):null}}},e=>{var r=r=>e(e.s=r);e.O(0,[992,523,353,198,683,441,517,358],()=>r(6511)),_N_E=e.O()}]);